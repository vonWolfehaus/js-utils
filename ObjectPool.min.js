(function(){var s=this;if("undefined"!=typeof exports)var e=require("LinkedList");var t=function(s,t,i){this.free=new e,this.busy=new e,this.size=i,this._Class=s,this._settings=t||{},this._settings.pool=this;for(var n=0;n<this.size;n++)this.free.add(new this._Class(this._settings))};t.prototype={constructor:t,get:function(){var s;return this.free.length?(s=this.free.pop(),this.busy.add(s),s):(s=new this._Class(this._settings),this.busy.add(s),this.size++,s)},recycle:function(s){this.busy.has(s)&&(this.busy.remove(s),this.free.add(s))},freeAll:function(){for(var s,e=this.busy.first;e;)s=e.obj,this.busy.remove(s),this.free.add(s),e=e.next},dispose:function(){for(var s=this.busy.first;s;)s.obj.dispose(),s=s.next;for(s=this.free.first;s;)s.obj.dispose(),s=s.next;this.free.dispose(),this.busy.dispose(),this.free=null,this.busy=null,this._Class=null,this._settings=null},toString:function(){return"[ObjectPool size: "+this.size+", free: "+this.free.length+", busy: "+this.busy.length+"]"}},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports.ObjectPool=t):"undefined"!=typeof define&&define.amd?define(t):s.ObjectPool=t}).call(this);